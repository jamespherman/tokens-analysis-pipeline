# Aggregated Analysis Data Dictionary

This document defines the canonical data structure for the `aggregated_analysis_data.mat` file, which is the output of the `aggregate_analysis_results.m` script. This file contains two top-level structs: `aggregated_sc_data` and `aggregated_snc_data`.

The structure within each is dynamically generated by pooling the `.analysis` fields from all completed sessions for a given brain area.

## Top-Level Structure (`aggregated_sc_data` and `aggregated_snc_data`)

| Field | Type | Description |
|---|---|---|
| `session_id` | `[S x 1] cell` | A cell array of strings indicating the `unique_id` of each session aggregated. `S` is the total number of sessions. |
| `roc_comparison` | `struct` | Pooled results from the between-condition ROC analysis. |
| `svm_results` | `struct` | Pooled results from the SVM classification analysis. |
| `baseline_comparison` | `struct` | Pooled results from the baseline vs. post-event analysis. |
| `anova_results` | `struct` | Pooled results from the N-way ANOVA analysis. |

---

### `roc_comparison` Structure

-   **Path:** `aggregated_sc_data.roc_comparison.(eventName).(compName)`
-   **Description:** Contains the pooled results from `analyze_roc_comparison.m`. `eventName` is the alignment event (e.g., `CUE_ON`), and `compName` is the unique name for the analysis as defined in the `roc_plan` (e.g., `Dist_at_Cue`). The path is identical for `aggregated_snc_data`.

| Field | Type | Description |
|---|---|---|
| `.sig` | `[N x T] double` | A matrix of significance values pooled from all sessions, where `N` is the total number of neurons and `T` is the number of time bins. |
| `.time_vector` | `[1 x T] double` | The time vector corresponding to the columns of the `.sig` matrix. The first-encountered vector is used as the canonical time base for all aggregated neurons in this analysis. |

---

### `svm_results` Structure

-   **Path:** `aggregated_sc_data.svm_results.(eventName).(compName)`
-   **Description:** Contains the pooled results from `analyze_svm.m`. `eventName` is the alignment event, and `compName` is the unique name for the analysis from the `svm_plan`. The path is identical for `aggregated_snc_data`.

| Field | Type | Description |
|---|---|---|
| `.accuracy` | `[S x T] double` | A matrix of classification accuracies, where `S` is the number of sessions and `T` is the number of time bins. Each row represents one session. |
| `.accuracy_ci` | `[S x 2 x T] double` | A 3D matrix of the 95% confidence intervals for the accuracy. |
| `.time_vector` | `[1 x T] double` | The time vector corresponding to the columns of the accuracy matrices. |

---

### `baseline_comparison` Structure

-   **Path:** `aggregated_sc_data.baseline_comparison.(eventName).(condName)`
-   **Description:** Contains the pooled results from `analyze_baseline_comparison.m`. `eventName` is the alignment event, and `condName` is the name of the condition mask. The path is identical for `aggregated_snc_data`.

| Field | Type | Description |
|---|---|---|
| `.sig` | `[N x T] double` | A matrix of significance values pooled from all sessions. |
| `.time_vector` | `[1 x T] double`| The time vector corresponding to the columns of the `.sig` matrix. |

---

### `anova_results` Structure

-   **Path:** `aggregated_sc_data.anova_results.(eventName)`
-   **Description:** Contains the pooled results from `analyze_anova.m`. The path is identical for `aggregated_snc_data`.

| Field | Type | Description |
|---|---|---|
| `.(p_value_name)` | `[N x T] double` | A matrix of p-values for a specific ANOVA term (e.g., `.p_rpe`), pooled from all sessions. |
| `.time_vector` | `[1 x T] double` | The time vector corresponding to the columns of the p-value matrices for this event. |